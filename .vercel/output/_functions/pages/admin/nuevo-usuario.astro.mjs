/* empty css                                            */
import { c as createComponent, b as renderTemplate, r as renderComponent, m as maybeRenderHead } from '../../chunks/astro/server_dC-6T-Kg.mjs';
import 'kleur/colors';
import { $ as $$AdminLayout } from '../../chunks/AdminLayout_78FMoF68.mjs';
export { renderers } from '../../renderers.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const $$NuevoUsuario = createComponent(($$result, $$props, $$slots) => {
  return renderTemplate(_a || (_a = __template(["", " <script>\n  // Funci\xF3n para crear un nuevo usuario\n  function crearNuevoUsuario() {\n    console.log('Creando nuevo usuario...');\n    \n    // Obtener el formulario\n    const form = document.getElementById('nuevoUsuarioForm');\n    \n    if (form) {\n      // Obtener los datos del formulario\n      const formData = new FormData(form);\n      \n      const nombre = formData.get('nombre');\n      const email = formData.get('email');\n      const tipo = formData.get('tipo');\n      const telefono = formData.get('telefono');\n      const empresa = formData.get('empresa');\n      const password = formData.get('password');\n      const confirmPassword = formData.get('confirmPassword');\n      \n      // Validar que las contrase\xF1as coincidan\n      if (password !== confirmPassword) {\n        alert('Las contrase\xF1as no coinciden');\n        return;\n      }\n      \n      // Crear el objeto de datos a enviar\n      const userData = {\n        nombre,\n        email,\n        tipo,\n        telefono: telefono || null,\n        empresa: empresa || null,\n        password,\n      };\n      \n      // Mostrar los datos que se van a enviar (para depuraci\xF3n)\n      console.log('Enviando datos:', { ...userData, password: '******' });\n      \n      // Enviar los datos al servidor\n      fetch('/api/crear-usuario', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(userData),\n      })\n      .then(response => {\n        console.log('Respuesta recibida:', response);\n        return response.json();\n      })\n      .then(data => {\n        console.log('Datos recibidos:', data);\n        if (data.success) {\n          alert('Usuario creado correctamente');\n          window.location.href = '/admin/usuarios';\n        } else {\n          alert(`Error: ${data.error || 'No se pudo crear el usuario'}`);\n        }\n      })\n      .catch(error => {\n        console.error('Error al crear el usuario:', error);\n        alert('Error al crear el usuario. Por favor, int\xE9ntelo de nuevo.');\n      });\n    } else {\n      console.error('Formulario no encontrado');\n    }\n  }\n  \n  // Asignar el evento al bot\xF3n inmediatamente\n  document.addEventListener('DOMContentLoaded', function() {\n    console.log('DOM cargado, inicializando eventos...');\n    \n    const crearBtn = document.getElementById('crearUsuario');\n    if (crearBtn) {\n      console.log('Bot\xF3n de crear encontrado, agregando evento click');\n      crearBtn.addEventListener('click', crearNuevoUsuario);\n    } else {\n      console.error('Bot\xF3n de crear no encontrado');\n    }\n  });\n  \n  // Tambi\xE9n asignar el evento inmediatamente por si el DOM ya est\xE1 cargado\n  const crearBtn = document.getElementById('crearUsuario');\n  if (crearBtn) {\n    console.log('Bot\xF3n de crear encontrado (fuera de DOMContentLoaded), agregando evento click');\n    crearBtn.addEventListener('click', crearNuevoUsuario);\n  }\n<\/script>"], ["", " <script>\n  // Funci\xF3n para crear un nuevo usuario\n  function crearNuevoUsuario() {\n    console.log('Creando nuevo usuario...');\n    \n    // Obtener el formulario\n    const form = document.getElementById('nuevoUsuarioForm');\n    \n    if (form) {\n      // Obtener los datos del formulario\n      const formData = new FormData(form);\n      \n      const nombre = formData.get('nombre');\n      const email = formData.get('email');\n      const tipo = formData.get('tipo');\n      const telefono = formData.get('telefono');\n      const empresa = formData.get('empresa');\n      const password = formData.get('password');\n      const confirmPassword = formData.get('confirmPassword');\n      \n      // Validar que las contrase\xF1as coincidan\n      if (password !== confirmPassword) {\n        alert('Las contrase\xF1as no coinciden');\n        return;\n      }\n      \n      // Crear el objeto de datos a enviar\n      const userData = {\n        nombre,\n        email,\n        tipo,\n        telefono: telefono || null,\n        empresa: empresa || null,\n        password,\n      };\n      \n      // Mostrar los datos que se van a enviar (para depuraci\xF3n)\n      console.log('Enviando datos:', { ...userData, password: '******' });\n      \n      // Enviar los datos al servidor\n      fetch('/api/crear-usuario', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(userData),\n      })\n      .then(response => {\n        console.log('Respuesta recibida:', response);\n        return response.json();\n      })\n      .then(data => {\n        console.log('Datos recibidos:', data);\n        if (data.success) {\n          alert('Usuario creado correctamente');\n          window.location.href = '/admin/usuarios';\n        } else {\n          alert(\\`Error: \\${data.error || 'No se pudo crear el usuario'}\\`);\n        }\n      })\n      .catch(error => {\n        console.error('Error al crear el usuario:', error);\n        alert('Error al crear el usuario. Por favor, int\xE9ntelo de nuevo.');\n      });\n    } else {\n      console.error('Formulario no encontrado');\n    }\n  }\n  \n  // Asignar el evento al bot\xF3n inmediatamente\n  document.addEventListener('DOMContentLoaded', function() {\n    console.log('DOM cargado, inicializando eventos...');\n    \n    const crearBtn = document.getElementById('crearUsuario');\n    if (crearBtn) {\n      console.log('Bot\xF3n de crear encontrado, agregando evento click');\n      crearBtn.addEventListener('click', crearNuevoUsuario);\n    } else {\n      console.error('Bot\xF3n de crear no encontrado');\n    }\n  });\n  \n  // Tambi\xE9n asignar el evento inmediatamente por si el DOM ya est\xE1 cargado\n  const crearBtn = document.getElementById('crearUsuario');\n  if (crearBtn) {\n    console.log('Bot\xF3n de crear encontrado (fuera de DOMContentLoaded), agregando evento click');\n    crearBtn.addEventListener('click', crearNuevoUsuario);\n  }\n<\/script>"])), renderComponent($$result, "AdminLayout", $$AdminLayout, { "title": "Nuevo Usuario", "activeLink": "usuarios" }, { "default": ($$result2) => renderTemplate` ${maybeRenderHead()}<div class="flex flex-col gap-6"> <div class="flex flex-col gap-2"> <h1 class="text-2xl font-bold tracking-tight">Nuevo Usuario</h1> <p class="text-muted-foreground">
Cree un nuevo usuario en el sistema.
</p> </div> <div class="rounded-lg border shadow-sm"> <div class="p-6"> <form id="nuevoUsuarioForm" class="space-y-6"> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"> <div class="space-y-2"> <label for="nombre" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Nombre</label> <input type="text" id="nombre" name="nombre" required class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"> </div> <div class="space-y-2"> <label for="email" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Email</label> <input type="email" id="email" name="email" required class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"> </div> <div class="space-y-2"> <label for="tipo" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Tipo de Usuario</label> <select id="tipo" name="tipo" required class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"> <option value="admin">Administrador</option> <option value="cliente" selected>Cliente</option> </select> </div> <div class="space-y-2"> <label for="telefono" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Tel√©fono</label> <input type="tel" id="telefono" name="telefono" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"> </div> <div class="space-y-2"> <label for="empresa" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Empresa</label> <input type="text" id="empresa" name="empresa" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"> </div> <div class="space-y-2"> <label for="password" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Contrase√±a</label> <input type="password" id="password" name="password" required class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"> </div> <div class="space-y-2"> <label for="confirmPassword" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Confirmar Contrase√±a</label> <input type="password" id="confirmPassword" name="confirmPassword" required class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"> </div> </div> <div class="flex justify-end gap-4"> <a href="/admin/usuarios" class="inline-flex h-10 items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50">
Cancelar
</a> <button type="button" id="crearUsuario" class="inline-flex h-10 items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50">
Crear Usuario
</button> </div> </form> </div> </div> </div> ` }));
}, "E:/TrabajosProgramador/Silvio Ramos/ingecivil-website/src/pages/admin/nuevo-usuario.astro", void 0);

const $$file = "E:/TrabajosProgramador/Silvio Ramos/ingecivil-website/src/pages/admin/nuevo-usuario.astro";
const $$url = "/admin/nuevo-usuario";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
  __proto__: null,
  default: $$NuevoUsuario,
  file: $$file,
  url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
