import{S as n}from"./sweetalert2.esm.all.B0Dix5B2.js";(function(){if(!document.querySelector('link[href*="sweetalert2.min.css"]')){const o=document.createElement("link");o.rel="stylesheet",o.href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css",document.head.appendChild(o),console.log("Estilos de SweetAlert2 cargados inmediatamente.")}})();function s(o,t){n.fire({title:"Eliminando...",text:"Por favor espere",allowOutsideClick:!1,didOpen:()=>{n.showLoading()}}),fetch("/api/eliminar-usuario",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:o})}).then(function(e){return e.json()}).then(function(e){e.success?(t&&t.remove(),n.fire({title:"¡Eliminado!",text:"El usuario ha sido eliminado correctamente.",icon:"success",confirmButtonColor:"#3085d6"})):n.fire({title:"Error",text:e.error||"No se pudo eliminar el usuario",icon:"error",confirmButtonColor:"#3085d6"})}).catch(function(e){console.error("Error al eliminar el usuario:",e),n.fire({title:"Error",text:"Error al eliminar el usuario. Por favor, inténtelo de nuevo.",icon:"error",confirmButtonColor:"#3085d6"})})}function c(){console.log("Configurando botones de eliminar para usuarios..."),document.querySelectorAll(".eliminar-usuario").forEach(function(t){const e=t.getAttribute("data-id"),r=t.getAttribute("data-nombre");if(!e||!r){console.error("Faltan atributos de datos en el botón");return}t.addEventListener("click",function(){n.fire({title:"¿Está seguro?",text:`¿Desea eliminar el usuario "${r}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(a=>{if(a.isConfirmed){const l=this.closest("tr");s(e,l)}})})})}function i(){console.log("Inicializando página de usuarios..."),c()}document.addEventListener("DOMContentLoaded",function(){console.log("DOMContentLoaded disparado"),i()});document.addEventListener("astro:page-load",function(){console.log("astro:page-load disparado"),i()});console.log("Ejecutando inicialización inmediata");i();
