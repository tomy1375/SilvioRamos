import{S as t}from"./sweetalert2.esm.all.B0Dix5B2.js";document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".eliminar-usuario").forEach(function(r){r.addEventListener("click",function(){const i=this.getAttribute("data-id"),e=this.getAttribute("data-nombre"),o=this.closest("tr");t.fire({title:"¿Está seguro?",text:`¿Desea eliminar el usuario "${e}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&l(i,o)})})});function l(r,i){t.fire({title:"Eliminando...",text:"Por favor espere",allowOutsideClick:!1,didOpen:()=>{t.showLoading()}}),fetch("/api/eliminar-usuario",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r})}).then(function(e){return e.json()}).then(function(e){if(e.success){i&&i.remove();const o=document.getElementById("clientesTableBody");if(o&&o.children.length===0){const n=o.closest(".relative");n&&(n.innerHTML=`
              <p class="text-muted-foreground p-4">No hay clientes disponibles.</p>
            `)}t.fire({title:"¡Eliminado!",text:"El usuario ha sido eliminado correctamente.",icon:"success",confirmButtonColor:"#3085d6"})}else t.fire({title:"Error",text:e.error||"No se pudo eliminar el usuario",icon:"error",confirmButtonColor:"#3085d6"})}).catch(function(e){console.error("Error al eliminar el usuario:",e),t.fire({title:"Error",text:"Error al eliminar el usuario. Por favor, inténtelo de nuevo.",icon:"error",confirmButtonColor:"#3085d6"})})}});
