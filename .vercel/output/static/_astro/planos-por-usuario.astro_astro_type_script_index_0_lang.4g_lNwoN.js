import{S as t}from"./sweetalert2.esm.all.B0Dix5B2.js";document.addEventListener("DOMContentLoaded",function(){const l=document.getElementById("seleccionarUsuarioForm");l&&l.addEventListener("submit",function(n){n.preventDefault();const e=document.getElementById("usuario");e&&e.value&&(window.location.href=`/admin/planos-por-usuario?usuario=${e.value}`)}),document.querySelectorAll(".eliminar-plano").forEach(function(n){n.addEventListener("click",function(){const e=this.getAttribute("data-id"),o=this.getAttribute("data-nombre"),i=this.closest("tr");t.fire({title:"¿Está seguro?",text:`¿Desea eliminar el plano "${o}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(r=>{r.isConfirmed&&a(e,i)})})});function a(n,e){t.fire({title:"Eliminando...",text:"Por favor espere",allowOutsideClick:!1,didOpen:()=>{t.showLoading()}}),fetch("/api/eliminar-plano",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n})}).then(function(o){return o.json()}).then(function(o){if(o.success){e&&e.remove();const i=e.parentElement;if(i&&i.children.length===0){const r=i.closest(".relative");r&&(r.innerHTML=`
              <p class="text-muted-foreground p-4">Este usuario no tiene planos asignados.</p>
            `)}t.fire({title:"¡Eliminado!",text:"El plano ha sido eliminado correctamente.",icon:"success",confirmButtonColor:"#3085d6"})}else t.fire({title:"Error",text:o.error||"No se pudo eliminar el plano",icon:"error",confirmButtonColor:"#3085d6"})}).catch(function(o){console.error("Error al eliminar el plano:",o),t.fire({title:"Error",text:"Error al eliminar el plano. Por favor, inténtelo de nuevo.",icon:"error",confirmButtonColor:"#3085d6"})})}});
